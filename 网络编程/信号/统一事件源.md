## 统一事件源

信号是一种异步事件：信号处理函数和程序的主循环是两条不同的执行路线。

> 需求，我们希望信号不会被屏蔽太久

很显然，信号处理函数需要尽可能快地执行完毕，以确保该信号不被屏蔽（前面提到过，为了避免一些竞态条件，信号在处理期间，系统不会再次触发它）太久。

> 解决方案

一种典型的解决方案是：把信号的主要处理逻辑放到程序的主循环中，当信号处理函数被触发时， 它只是简单地通知主循环程序接收到信号，并把信号值传递给主循环，主循环再根据接收到的信号值执行目标信号对应的逻辑代码。

> 如何将信号传递给主循环

**信号处理函数通常使用管道来将信号“传递”给主循环**：信号处理函数往管道的写端写入信号值，主循环则从管道的读端读出该信号值。

> 那么主循环怎么知道管道上何时有数据可读呢?

我们只需要**使用 I/O复用系统调用来监听管道的读端文件描述符上的可读事件**。如此一 来，信号事件就能和其他I/O事件一样被处理，即统一事件源。

## 代码案例
[unievent.cpp](https://github.com/Shangyizhou/Linux-CPP-/blob/main/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E4%BF%A1%E5%8F%B7/unievent.cpp)

